.data

rho:             .word 0x9b5
velocity:        .byte 200
pi:              .word 0x3243f7
radius:          .word 6
conv:            .word 0x1c7
dragCoeffecient: .word 0x666

message: .asciz "\nInteger Dynamic Pressure = %d lbs\nCross-Sectional Area x 32 = %d ft^2\nInteger Drag x 32 = %d lbs\n\n"

.text

	.global main
main:
	push {lr}

	mov r0, #1    @@ Reserved for printf msg
	mov r1, #1    @@ r1 = dynamic pressure
	mov r2, #1    @@ r2 = cross-sectional area
	mov r3, #1    @@ r3 = drag
	mov r4, #1    @@ multiplication factor

	@@ Calculate dynamic pressure -> r1

	mov r1, #1          @@ xBit  1, BP -1
	ldr r4, =0x9B5                          @@ 12 bits, << 20
	mul r1, r1, r4      @@ xBit 12, BP -21
	ldr r4, =200                            @@  8 bits
	mul r1, r1, r4      @@ xBit 20, BP -21
	mul r1, r1, r4      @@ xBit 28, BP -21
	mov r1, r1, lsr#12  @@ xBit 16, BP -9

	@@ Calculate cross-sectional area -> r2

	ldr r4, =0x3243f7
	ldr r2,                        @@ 24 bits, << 20
	ldr r4, =6                              @@  4 bits
	mul r2, r2, r4      @@ xBit 28
	mul r2, r2, r4
	mov r2, r2, lsr#12
	ldr r4, =0x1C7
	mul r2, r2, r4
	mov r2, r2, lsr#16

	@@ Calculate drag -> r3

	mul r3, r1, r2
	mov r3, r3, lsr#12
	ldr r4, =0x666
	mul r3, r3, r4

	@@ Left-shift calculations to get correct and final values

	mov r1, r1, lsr#9
	mov r2, r2, lsr#3
	mov r3, r3, lsr#12

/*
	mov r0, #1
	ldr r1, =6
	mul r0, r0, r1
	mul r0, r0, r1
	mov r0, r0, lsr#1
	mov r1, r0
*/
	ldr r0, =message
	bl printf

	pop {pc}
	mov pc, lr
